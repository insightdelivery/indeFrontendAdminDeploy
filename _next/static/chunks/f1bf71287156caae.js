(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64392,(t,e,r)=>{"use strict";e.exports=function(t,e){if(e=e.split(":")[0],!(t*=1))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},28220,(t,e,r)=>{"use strict";var o,n=Object.prototype.hasOwnProperty;function i(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function a(t){try{return encodeURIComponent(t)}catch(t){return null}}r.stringify=function(t,e){var r,i,s=[];for(i in"string"!=typeof(e=e||"")&&(e="?"),t)if(n.call(t,i)){if(!(r=t[i])&&(null===r||r===o||isNaN(r))&&(r=""),i=a(i),r=a(r),null===i||null===r)continue;s.push(i+"="+r)}return s.length?e+s.join("&"):""},r.parse=function(t){for(var e,r=/([^=?#&]+)=?([^&]*)/g,o={};e=r.exec(t);){var n=i(e[1]),a=i(e[2]);null===n||null===a||n in o||(o[n]=a)}return o}},74464,(t,e,r)=>{"use strict";var o=t.r(64392),n=t.r(28220),i=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,a=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,u=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,c=/^[a-zA-Z]:/;function f(t){return(t||"").toString().replace(i,"")}var p=[["#","hash"],["?","query"],function(t,e){return y(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function d(e){var r,o,n=(r="u">typeof window?window:t.g).location||{},i={},a=typeof(e=e||n);if("blob:"===e.protocol)i=new m(unescape(e.pathname),{});else if("string"===a)for(o in i=new m(e,{}),h)delete i[o];else if("object"===a){for(o in e)o in h||(i[o]=e[o]);void 0===i.slashes&&(i.slashes=s.test(e.href))}return i}function y(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function v(t,e){t=(t=f(t)).replace(a,""),e=e||{};var r,o=l.exec(t),n=o[1]?o[1].toLowerCase():"",i=!!o[2],s=!!o[3],u=0;return i?s?(r=o[2]+o[3]+o[4],u=o[2].length+o[3].length):(r=o[2]+o[4],u=o[2].length):s?(r=o[3]+o[4],u=o[3].length):r=o[4],"file:"===n?u>=2&&(r=r.slice(2)):y(n)?r=o[4]:n?i&&(r=r.slice(2)):u>=2&&y(e.protocol)&&(r=o[4]),{protocol:n,slashes:i||y(n),slashesCount:u,rest:r}}function m(t,e,r){if(t=(t=f(t)).replace(a,""),!(this instanceof m))return new m(t,e,r);var i,s,u,l,h,g,b=p.slice(),_=typeof e,w=0;for("object"!==_&&"string"!==_&&(r=e,e=null),r&&"function"!=typeof r&&(r=n.parse),i=!(s=v(t||"",e=d(e))).protocol&&!s.slashes,this.slashes=s.slashes||i&&e.slashes,this.protocol=s.protocol||e.protocol||"",t=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||c.test(t))||!s.slashes&&(s.protocol||s.slashesCount<2||!y(this.protocol)))&&(b[3]=[/(.*)/,"pathname"]);w<b.length;w++){if("function"==typeof(l=b[w])){t=l(t,this);continue}u=l[0],g=l[1],u!=u?this[g]=t:"string"==typeof u?~(h="@"===u?t.lastIndexOf(u):t.indexOf(u))&&("number"==typeof l[2]?(this[g]=t.slice(0,h),t=t.slice(h+l[2])):(this[g]=t.slice(h),t=t.slice(0,h))):(h=u.exec(t))&&(this[g]=h[1],t=t.slice(0,h.index)),this[g]=this[g]||i&&l[3]&&e[g]||"",l[4]&&(this[g]=this[g].toLowerCase())}r&&(this.query=r(this.query)),i&&e.slashes&&"/"!==this.pathname.charAt(0)&&(""!==this.pathname||""!==e.pathname)&&(this.pathname=function(t,e){if(""===t)return e;for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),o=r.length,n=r[o-1],i=!1,a=0;o--;)"."===r[o]?r.splice(o,1):".."===r[o]?(r.splice(o,1),a++):a&&(0===o&&(i=!0),r.splice(o,1),a--);return i&&r.unshift(""),("."===n||".."===n)&&r.push(""),r.join("/")}(this.pathname,e.pathname)),"/"!==this.pathname.charAt(0)&&y(this.protocol)&&(this.pathname="/"+this.pathname),o(this.port,this.protocol)||(this.host=this.hostname,this.port=""),this.username=this.password="",this.auth&&(~(h=this.auth.indexOf(":"))?(this.username=this.auth.slice(0,h),this.username=encodeURIComponent(decodeURIComponent(this.username)),this.password=this.auth.slice(h+1),this.password=encodeURIComponent(decodeURIComponent(this.password))):this.username=encodeURIComponent(decodeURIComponent(this.auth)),this.auth=this.password?this.username+":"+this.password:this.username),this.origin="file:"!==this.protocol&&y(this.protocol)&&this.host?this.protocol+"//"+this.host:"null",this.href=this.toString()}m.prototype={set:function(t,e,r){switch(t){case"query":"string"==typeof e&&e.length&&(e=(r||n.parse)(e)),this[t]=e;break;case"port":this[t]=e,o(e,this.protocol)?e&&(this.host=this.hostname+":"+e):(this.host=this.hostname,this[t]="");break;case"hostname":this[t]=e,this.port&&(e+=":"+this.port),this.host=e;break;case"host":this[t]=e,u.test(e)?(e=e.split(":"),this.port=e.pop(),this.hostname=e.join(":")):(this.hostname=e,this.port="");break;case"protocol":this.protocol=e.toLowerCase(),this.slashes=!r;break;case"pathname":case"hash":if(e){var i="pathname"===t?"/":"#";this[t]=e.charAt(0)!==i?i+e:e}else this[t]=e;break;case"username":case"password":this[t]=encodeURIComponent(e);break;case"auth":var a=e.indexOf(":");~a?(this.username=e.slice(0,a),this.username=encodeURIComponent(decodeURIComponent(this.username)),this.password=e.slice(a+1),this.password=encodeURIComponent(decodeURIComponent(this.password))):this.username=encodeURIComponent(decodeURIComponent(e))}for(var s=0;s<p.length;s++){var l=p[s];l[4]&&(this[l[1]]=this[l[1]].toLowerCase())}return this.auth=this.password?this.username+":"+this.password:this.username,this.origin="file:"!==this.protocol&&y(this.protocol)&&this.host?this.protocol+"//"+this.host:"null",this.href=this.toString(),this},toString:function(t){t&&"function"==typeof t||(t=n.stringify);var e,r=this.host,o=this.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var i=o+(this.protocol&&this.slashes||y(this.protocol)?"//":"");return this.username?(i+=this.username,this.password&&(i+=":"+this.password),i+="@"):this.password?(i+=":"+this.password,i+="@"):"file:"!==this.protocol&&y(this.protocol)&&!r&&"/"!==this.pathname&&(i+="@"),(":"===r[r.length-1]||u.test(this.hostname)&&!this.port)&&(r+=":"),i+=r+this.pathname,(e="object"==typeof this.query?t(this.query):this.query)&&(i+="?"!==e.charAt(0)?"?"+e:e),this.hash&&(i+=this.hash),i}},m.extractProtocol=v,m.location=d,m.trimLeft=f,m.qs=n,e.exports=m},10545,t=>{"use strict";let e;function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){var e="function"==typeof Map?new Map:void 0;return(o=function(t){if(null===t||!function(t){try{return -1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(n())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,e);var a=new(t.bind.apply(t,o));return r&&i(a,r.prototype),a}(t,arguments,a(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i(r,t)})(t)}function n(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(n=function(){return!!t})()}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s,u,l,c,f,p,h,d,y,v,m,g,b=function(t){function e(t){var o,i,s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");if(o=e,i=[t],o=a(o),(s=function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var o=t;if(void 0===o)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return o}(this,n()?Reflect.construct(o,i||[],a(this).constructor):o.apply(this,i))).originalRequest=l,s.originalResponse=c,s.causingError=u,null!=u&&(t+=", caused by ".concat(u.toString())),null!=l){var f=l.getHeader("X-Request-ID")||"n/a",p=l.getMethod(),h=l.getURL(),d=c?c.getStatus():"n/a",y=c?c.getBody()||"":"n/a";t+=", originated from request (method: ".concat(p,", url: ").concat(h,", response code: ").concat(d,", response text: ").concat(y,", request id: ").concat(f,")")}return s.message=t,s}if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(o(Error)),_=!1;function w(){_=!0}function S(t){_&&console.log(t)}function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var x=(s=function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")},u=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve([])}},{key:"removeUpload",value:function(t){return Promise.resolve()}},{key:"addUpload",value:function(t,e){return Promise.resolve(null)}}],function(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!=U(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=U(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==U(e)?e:e+""}(o.key),o)}}(s.prototype,u),Object.defineProperty(s,"prototype",{writable:!1}),s),E=t.i(67034);let O="function"==typeof E.Buffer,P="function"==typeof TextDecoder?new TextDecoder:void 0,j="function"==typeof TextEncoder?new TextEncoder:void 0,k=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),R=(e={},k.forEach((t,r)=>e[t]=r),e),L=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,C=String.fromCharCode.bind(String),A="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),T=t=>t.replace(/=/g,"").replace(/[+\/]/g,t=>"+"==t?"-":"_"),D="function"==typeof btoa?t=>btoa(t):O?t=>E.Buffer.from(t,"binary").toString("base64"):t=>{let e,r,o,n,i="",a=t.length%3;for(let a=0;a<t.length;){if((r=t.charCodeAt(a++))>255||(o=t.charCodeAt(a++))>255||(n=t.charCodeAt(a++))>255)throw TypeError("invalid character found");i+=k[(e=r<<16|o<<8|n)>>18&63]+k[e>>12&63]+k[e>>6&63]+k[63&e]}return a?i.slice(0,a-3)+"===".substring(a):i},z=O?t=>E.Buffer.from(t).toString("base64"):t=>{let e=[];for(let r=0,o=t.length;r<o;r+=4096)e.push(C.apply(null,t.subarray(r,r+4096)));return D(e.join(""))},H=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?C(192|e>>>6)+C(128|63&e):C(224|e>>>12&15)+C(128|e>>>6&63)+C(128|63&e)}var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return C(240|e>>>18&7)+C(128|e>>>12&63)+C(128|e>>>6&63)+C(128|63&e)},N=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,F=O?t=>E.Buffer.from(t,"utf8").toString("base64"):j?t=>z(j.encode(t)):t=>D(t.replace(N,H)),I=(t,e=!1)=>e?T(F(t)):F(t),q=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,B=t=>{switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return C((e>>>10)+55296)+C((1023&e)+56320);case 3:return C((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return C((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},G="function"==typeof atob?t=>atob(t.replace(/[^A-Za-z0-9\+\/]/g,"")):O?t=>E.Buffer.from(t,"base64").toString("binary"):t=>{let e,r,o;if(t=t.replace(/\s+/g,""),!L.test(t))throw TypeError("malformed base64.");t+="==".slice(2-(3&t.length));let n=[];for(let i=0;i<t.length;)e=R[t.charAt(i++)]<<18|R[t.charAt(i++)]<<12|(r=R[t.charAt(i++)])<<6|(o=R[t.charAt(i++)]),64===r?n.push(C(e>>16&255)):64===o?n.push(C(e>>16&255,e>>8&255)):n.push(C(e>>16&255,e>>8&255,255&e));return n.join("")},M=O?t=>A(E.Buffer.from(t,"base64")):t=>A(G(t).split("").map(t=>t.charCodeAt(0))),K=O?t=>E.Buffer.from(t,"base64").toString("utf8"):P?t=>P.decode(M(t)):t=>G(t).replace(q,B);var X=t.i(74464);function Z(){Z=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(e,r,o,i){var a,s,u,l,c=Object.create((r&&r.prototype instanceof v?r:v).prototype);return n(c,"_invoke",{value:(a=e,s=o,u=new P(i||[]),l=p,function(e,r){if(l===h)throw Error("Generator is already running");if(l===d){if("throw"===e)throw r;return{value:t,done:!0}}for(u.method=e,u.arg=r;;){var o=u.delegate;if(o){var n=function e(r,o){var n=o.method,i=r.iterator[n];if(i===t)return o.delegate=null,"throw"===n&&r.iterator.return&&(o.method="return",o.arg=t,e(r,o),"throw"===o.method)||"return"!==n&&(o.method="throw",o.arg=TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(i,r.iterator,o.arg);if("throw"===a.type)return o.method="throw",o.arg=a.arg,o.delegate=null,y;var s=a.arg;return s?s.done?(o[r.resultName]=s.value,o.next=r.nextLoc,"return"!==o.method&&(o.method="next",o.arg=t),o.delegate=null,y):s:(o.method="throw",o.arg=TypeError("iterator result is not an object"),o.delegate=null,y)}(o,u);if(n){if(n===y)continue;return n}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(l===p)throw l=d,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);l=h;var i=f(a,s,u);if("normal"===i.type){if(l=u.done?d:"suspendedYield",i.arg===y)continue;return{value:i.arg,done:u.done}}"throw"===i.type&&(l=d,u.method="throw",u.arg=i.arg)}})}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="executing",d="completed",y={};function v(){}function m(){}function g(){}var b={};l(b,a,function(){return this});var _=Object.getPrototypeOf,w=_&&_(_(j([])));w&&w!==r&&o.call(w,a)&&(b=w);var S=g.prototype=v.prototype=Object.create(b);function U(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function x(t,e){var r;n(this,"_invoke",{value:function(n,i){function a(){return new e(function(r,a){!function r(n,i,a,s){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==$(c)&&o.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}(n,i,r,a)})}return r=r?r.then(a,a):a()}})}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(o.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw TypeError($(e)+" is not iterable")}return m.prototype=g,n(S,"constructor",{value:g,configurable:!0}),n(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},U(x.prototype),l(x.prototype,s,function(){return this}),e.AsyncIterator=x,e.async=function(t,r,o,n,i){void 0===i&&(i=Promise);var a=new x(c(t,r,o,n),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},U(S),l(S,u,"Generator"),l(S,a,function(){return this}),l(S,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var o in e)r.push(o);return r.reverse(),function t(){for(;r.length;){var o=r.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(o,n){return s.type="throw",s.arg=e,r.next=o,n&&(r.method="next",r.arg=t),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var n=o.arg;O(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,o){return this.delegate={iterator:j(e),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function Y(t,e,r,o,n,i,a){try{var s=t[i](a),u=s.value}catch(t){r(t);return}s.done?e(u):Promise.resolve(u).then(o,n)}function J(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"u">typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var o,n,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=i.call(r)).done)&&(s.push(o.value),s.length!==e);u=!0);}catch(t){l=!0,n=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw n}}return s}}(t,e)||V(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){if(t){if("string"==typeof t)return Q(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(t,e)}}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=Array(e);r<e;r++)o[r]=t[r];return o}function W(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)}return r}function tt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?W(Object(r),!0).forEach(function(e){var o,n,i;o=t,n=e,i=r[e],(n=tr(n))in o?Object.defineProperty(o,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function te(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,tr(o.key),o)}}function tr(t){var e=function(t,e){if("object"!=$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=$(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$(e)?e:e+""}var to="tus-v1",tn="ietf-draft-03",ti="ietf-draft-05",ta=function(){var t,e;function r(t,e){if(!(this instanceof r))throw TypeError("Cannot call a class as a function");"resume"in e&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=e,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return t=[{key:"findPreviousUploads",value:function(){var t=this;return this.options.fingerprint(this.file,this.options).then(function(e){return t._urlStorage.findUploadsByFingerprint(e)})}},{key:"resumeFromPreviousUpload",value:function(t){this.url=t.uploadUrl||null,this._parallelUploadUrls=t.parallelUploadUrls||null,this._urlStorageKey=t.urlStorageKey}},{key:"start",value:function(){var t=this,e=this.file;if(!e)return void this._emitError(Error("tus: no file or stream to upload provided"));if(![to,tn,ti].includes(this.options.protocol))return void this._emitError(Error("tus: unsupported protocol ".concat(this.options.protocol)));if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url)return void this._emitError(Error("tus: neither an endpoint or an upload URL is provided"));var r=this.options.retryDelays;if(null!=r&&"[object Array]"!==Object.prototype.toString.call(r))return void this._emitError(Error("tus: the `retryDelays` option must either be an array or null"));if(this.options.parallelUploads>1)for(var o=0,n=["uploadUrl","uploadSize","uploadLengthDeferred"];o<n.length;o++){var i=n[o];if(this.options[i])return void this._emitError(Error("tus: cannot use the ".concat(i," option when parallelUploads is enabled")))}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1)return void this._emitError(Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length)return void this._emitError(Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"))}this.options.fingerprint(e,this.options).then(function(r){return(null==r?S("No fingerprint was calculated meaning that the upload cannot be stored in the URL storage."):S("Calculated fingerprint: ".concat(r)),t._fingerprint=r,t._source)?t._source:t.options.fileReader.openFile(e,t.options.chunkSize)}).then(function(e){if(t._source=e,t.options.uploadLengthDeferred)t._size=null;else if(null!=t.options.uploadSize){if(t._size=Number(t.options.uploadSize),Number.isNaN(t._size))return void t._emitError(Error("tus: cannot convert `uploadSize` option into a number"))}else if(t._size=t._source.size,null==t._size)return void t._emitError(Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));t.options.parallelUploads>1||null!=t._parallelUploadUrls?t._startParallelUpload():t._startSingleUpload()}).catch(function(e){t._emitError(e)})}},{key:"_startParallelUpload",value:function(){var t,e,o=this,n=this._size,i=0;this._parallelUploads=[];var a=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,s=null!=(e=this.options.parallelUploadBoundaries)?e:function(t,e){for(var r=Math.floor(t/e),o=[],n=0;n<e;n++)o.push({start:r*n,end:r*(n+1)});return o[e-1].end=t,o}(this._source.size,a);this._parallelUploadUrls&&s.forEach(function(t,e){t.uploadUrl=o._parallelUploadUrls[e]||null}),this._parallelUploadUrls=Array(s.length),Promise.all(s.map(function(t,e){var a=0;return o._source.slice(t.start,t.end).then(function(u){var l=u.value;return new Promise(function(u,c){var f=new r(l,tt(tt({},o.options),{},{uploadUrl:t.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:o.options.metadataForPartialUploads,headers:tt(tt({},o.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:u,onError:c,onProgress:function(t){i=i-a+t,a=t,o._emitProgress(i,n)},onUploadUrlAvailable:function(){o._parallelUploadUrls[e]=f.url,o._parallelUploadUrls.filter(function(t){return!!t}).length===s.length&&o._saveUploadInUrlStorage()}}));f.start(),o._parallelUploads.push(f)})})})).then(function(){(t=o._openRequest("POST",o.options.endpoint)).setHeader("Upload-Concat","final;".concat(o._parallelUploadUrls.join(" ")));var e=ts(o.options.metadata);return""!==e&&t.setHeader("Upload-Metadata",e),o._sendRequest(t,null)}).then(function(e){if(!tu(e.getStatus(),200))return void o._emitHttpError(t,e,"tus: unexpected response while creating upload");var r=e.getHeader("Location");null==r?o._emitHttpError(t,e,"tus: invalid or missing Location header"):(o.url=td(o.options.endpoint,r),S("Created upload at ".concat(o.url)),o._emitSuccess(e))}).catch(function(t){o._emitError(t)})}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,null!=this.url){S("Resuming upload from previous URL: ".concat(this.url)),this._resumeUpload();return}if(null!=this.options.uploadUrl){S("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,this._resumeUpload();return}S("Creating a new upload"),this._createUpload()}},{key:"abort",value:function(t){var e=this;if(null!=this._parallelUploads){var o,n=function(t,e){var r="u">typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=V(t))){r&&(t=r);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(this._parallelUploads);try{for(n.s();!(o=n.n()).done;)o.value.abort(t)}catch(t){n.e(t)}finally{n.f()}}return(null!==this._req&&this._req.abort(),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url)?r.terminate(this.url,this.options).then(function(){return e._removeFromUrlStorage()}):Promise.resolve()}},{key:"_emitHttpError",value:function(t,e,r,o){this._emitError(new b(r,o,t,e))}},{key:"_emitError",value:function(t){var e=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),tp(t,this._retryAttempt,this.options))){var r=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){e.start()},r);return}if("function"==typeof this.options.onError)this.options.onError(t);else throw t}}},{key:"_emitSuccess",value:function(t){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess({lastResponse:t})}},{key:"_emitProgress",value:function(t,e){"function"==typeof this.options.onProgress&&this.options.onProgress(t,e)}},{key:"_emitChunkComplete",value:function(t,e,r){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(t,e,r)}},{key:"_createUpload",value:function(){var t,e=this;if(!this.options.endpoint)return void this._emitError(Error("tus: unable to create upload because no endpoint is provided"));var r=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?r.setHeader("Upload-Defer-Length","1"):r.setHeader("Upload-Length","".concat(this._size));var o=ts(this.options.metadata);""!==o&&r.setHeader("Upload-Metadata",o),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,t=this._addChunkToRequest(r)):((this.options.protocol===tn||this.options.protocol===ti)&&r.setHeader("Upload-Complete","?0"),t=this._sendRequest(r,null)),t.then(function(t){if(!tu(t.getStatus(),200))return void e._emitHttpError(r,t,"tus: unexpected response while creating upload");var o=t.getHeader("Location");if(null==o)return void e._emitHttpError(r,t,"tus: invalid or missing Location header");if(e.url=td(e.options.endpoint,o),S("Created upload at ".concat(e.url)),"function"==typeof e.options.onUploadUrlAvailable&&e.options.onUploadUrlAvailable(),0===e._size){e._emitSuccess(t),e._source.close();return}e._saveUploadInUrlStorage().then(function(){e.options.uploadDataDuringCreation?e._handleUploadResponse(r,t):(e._offset=0,e._performUpload())})}).catch(function(t){e._emitHttpError(r,null,"tus: failed to create upload",t)})}},{key:"_resumeUpload",value:function(){var t=this,e=this._openRequest("HEAD",this.url);this._sendRequest(e,null).then(function(r){var o=r.getStatus();if(!tu(o,200))return 423===o?void t._emitHttpError(e,r,"tus: upload is currently locked; retry later"):(tu(o,400)&&t._removeFromUrlStorage(),t.options.endpoint)?(t.url=null,void t._createUpload()):void t._emitHttpError(e,r,"tus: unable to resume upload (new upload cannot be created without an endpoint)");var n=Number.parseInt(r.getHeader("Upload-Offset"),10);if(Number.isNaN(n))return void t._emitHttpError(e,r,"tus: invalid or missing offset value");var i=Number.parseInt(r.getHeader("Upload-Length"),10);Number.isNaN(i)&&!t.options.uploadLengthDeferred&&t.options.protocol===to?t._emitHttpError(e,r,"tus: invalid or missing length value"):("function"==typeof t.options.onUploadUrlAvailable&&t.options.onUploadUrlAvailable(),t._saveUploadInUrlStorage().then(function(){if(n===i){t._emitProgress(i,i),t._emitSuccess(r);return}t._offset=n,t._performUpload()}))}).catch(function(r){t._emitHttpError(e,null,"tus: failed to resume upload",r)})}},{key:"_performUpload",value:function(){var t,e=this;this._aborted||(this.options.overridePatchMethod?(t=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):t=this._openRequest("PATCH",this.url),t.setHeader("Upload-Offset","".concat(this._offset)),this._addChunkToRequest(t).then(function(r){tu(r.getStatus(),200)?e._handleUploadResponse(t,r):e._emitHttpError(t,r,"tus: unexpected response while uploading chunk")}).catch(function(r){e._aborted||e._emitHttpError(t,null,"tus: failed to upload chunk at offset ".concat(e._offset),r)}))}},{key:"_addChunkToRequest",value:function(t){var e=this,r=this._offset,o=this._offset+this.options.chunkSize;return t.setProgressHandler(function(t){e._emitProgress(r+t,e._size)}),this.options.protocol===to?t.setHeader("Content-Type","application/offset+octet-stream"):this.options.protocol===ti&&t.setHeader("Content-Type","application/partial-upload"),(o===1/0||o>this._size)&&!this.options.uploadLengthDeferred&&(o=this._size),this._source.slice(r,o).then(function(r){var o=r.value,n=r.done,i=null!=o&&o.size?o.size:0;e.options.uploadLengthDeferred&&n&&(e._size=e._offset+i,t.setHeader("Upload-Length","".concat(e._size)));var a=e._offset+i;return!e.options.uploadLengthDeferred&&n&&a!==e._size?Promise.reject(Error("upload was configured with a size of ".concat(e._size," bytes, but the source is done after ").concat(a," bytes"))):null===o?e._sendRequest(t):((e.options.protocol===tn||e.options.protocol===ti)&&t.setHeader("Upload-Complete",n?"?1":"?0"),e._emitProgress(e._offset,e._size),e._sendRequest(t,o))})}},{key:"_handleUploadResponse",value:function(t,e){var r=Number.parseInt(e.getHeader("Upload-Offset"),10);if(Number.isNaN(r))return void this._emitHttpError(t,e,"tus: invalid or missing offset value");if(this._emitProgress(r,this._size),this._emitChunkComplete(r-this._offset,r,this._size),this._offset=r,r===this._size){this._emitSuccess(e),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(t,e){var r=tl(t,e,this.options);return this._req=r,r}},{key:"_removeFromUrlStorage",value:function(){var t=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(e){t._emitError(e)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var t=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||null!==this._urlStorageKey)return Promise.resolve();var e={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};return this._parallelUploads?e.parallelUploadUrls=this._parallelUploadUrls:e.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,e).then(function(e){t._urlStorageKey=e})}},{key:"_sendRequest",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return tc(t,e,this.options)}}],e=[{key:"terminate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=tl("DELETE",t,e);return tc(o,null,e).then(function(t){if(204!==t.getStatus())throw new b("tus: unexpected response while terminating upload",null,o,t)}).catch(function(n){if(n instanceof b||(n=new b("tus: failed to terminate upload",n,o,null)),!tp(n,0,e))throw n;var i=e.retryDelays[0],a=e.retryDelays.slice(1),s=tt(tt({},e),{},{retryDelays:a});return new Promise(function(t){return setTimeout(t,i)}).then(function(){return r.terminate(t,s)})})}}],t&&te(r.prototype,t),e&&te(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}();function ts(t){return Object.entries(t).map(function(t){var e=J(t,2),r=e[0],o=e[1];return"".concat(r," ").concat(I(String(o)))}).join(",")}function tu(t,e){return t>=e&&t<e+100}function tl(t,e,r){var o=r.httpStack.createRequest(t,e);r.protocol===tn?o.setHeader("Upload-Draft-Interop-Version","5"):r.protocol===ti?o.setHeader("Upload-Draft-Interop-Version","6"):o.setHeader("Tus-Resumable","1.0.0");for(var n=r.headers||{},i=0,a=Object.entries(n);i<a.length;i++){var s=J(a[i],2),u=s[0],l=s[1];o.setHeader(u,l)}if(r.addRequestId){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)});o.setHeader("X-Request-ID",c)}return o}function tc(t,e,r){return tf.apply(this,arguments)}function tf(){var t;return t=Z().mark(function t(e,r,o){var n;return Z().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof o.onBeforeRequest){t.next=3;break}return t.next=3,o.onBeforeRequest(e);case 3:return t.next=5,e.send(r);case 5:if(n=t.sent,"function"!=typeof o.onAfterResponse){t.next=9;break}return t.next=9,o.onAfterResponse(e,n);case 9:return t.abrupt("return",n);case 10:case"end":return t.stop()}},t)}),(tf=function(){var e=this,r=arguments;return new Promise(function(o,n){var i=t.apply(e,r);function a(t){Y(i,o,n,a,s,"next",t)}function s(t){Y(i,o,n,a,s,"throw",t)}a(void 0)})}).apply(this,arguments)}function tp(t,e,r){return null!=r.retryDelays&&!(e>=r.retryDelays.length)&&null!=t.originalRequest&&(r&&"function"==typeof r.onShouldRetry?r.onShouldRetry(t,e,r):th(t))}function th(t){var e,r=t.originalResponse?t.originalResponse.getStatus():0;return(!tu(r,400)||409===r||423===r)&&(e=!0,"u">typeof navigator&&!1===navigator.onLine&&(e=!1),e)}function td(t,e){return new X.default(e,t).toString()}ta.defaultOptions={endpoint:null,uploadUrl:null,metadata:{},metadataForPartialUploads:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:th,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null,protocol:to};let ty=function(){return"u">typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};function tv(t){return(tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var tm=(l=function t(e){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");this._file=e,this.size=e.size},c=[{key:"slice",value:function(t,e){if("u">typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)){var r;return r=this._file.slice(t,e),new Promise(function(t,e){var o=new FileReader;o.onload=function(){t({value:new Uint8Array(o.result)})},o.onerror=function(t){e(t)},o.readAsArrayBuffer(r)})}return Promise.resolve({value:this._file.slice(t,e),done:e>=this.size})}},{key:"close",value:function(){}}],function(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!=tv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=tv(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tv(e)?e:e+""}(o.key),o)}}(l.prototype,c),Object.defineProperty(l,"prototype",{writable:!1}),l);function tg(t){return(tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tb(t){return void 0===t?0:void 0!==t.size?t.size:t.length}var t_=(f=function t(e){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1},p=[{key:"slice",value:function(t,e){return t<this._bufferOffset?Promise.reject(Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(t,e)}},{key:"_readUntilEnoughDataOrDone",value:function(t,e){var r=this,o=e<=this._bufferOffset+tb(this._buffer);if(this._done||o){var n=this._getDataFromBuffer(t,e),i=null==n&&this._done;return Promise.resolve({value:n,done:i})}return this._reader.read().then(function(o){var n=o.value;return o.done?r._done=!0:void 0===r._buffer?r._buffer=n:r._buffer=function(t,e){if(t.concat)return t.concat(e);if(t instanceof Blob)return new Blob([t,e],{type:t.type});if(t.set){var r=new t.constructor(t.length+e.length);return r.set(t),r.set(e,t.length),r}throw Error("Unknown data type")}(r._buffer,n),r._readUntilEnoughDataOrDone(t,e)})}},{key:"_getDataFromBuffer",value:function(t,e){t>this._bufferOffset&&(this._buffer=this._buffer.slice(t-this._bufferOffset),this._bufferOffset=t);var r=0===tb(this._buffer);return this._done&&r?null:this._buffer.slice(0,e-t)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}],function(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!=tg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=tg(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tg(e)?e:e+""}(o.key),o)}}(f.prototype,p),Object.defineProperty(f,"prototype",{writable:!1}),f);function tw(t){return(tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tS(){tS=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(e,r,o,i){var a,s,u,l,c=Object.create((r&&r.prototype instanceof v?r:v).prototype);return n(c,"_invoke",{value:(a=e,s=o,u=new P(i||[]),l=p,function(e,r){if(l===h)throw Error("Generator is already running");if(l===d){if("throw"===e)throw r;return{value:t,done:!0}}for(u.method=e,u.arg=r;;){var o=u.delegate;if(o){var n=function e(r,o){var n=o.method,i=r.iterator[n];if(i===t)return o.delegate=null,"throw"===n&&r.iterator.return&&(o.method="return",o.arg=t,e(r,o),"throw"===o.method)||"return"!==n&&(o.method="throw",o.arg=TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(i,r.iterator,o.arg);if("throw"===a.type)return o.method="throw",o.arg=a.arg,o.delegate=null,y;var s=a.arg;return s?s.done?(o[r.resultName]=s.value,o.next=r.nextLoc,"return"!==o.method&&(o.method="next",o.arg=t),o.delegate=null,y):s:(o.method="throw",o.arg=TypeError("iterator result is not an object"),o.delegate=null,y)}(o,u);if(n){if(n===y)continue;return n}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(l===p)throw l=d,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);l=h;var i=f(a,s,u);if("normal"===i.type){if(l=u.done?d:"suspendedYield",i.arg===y)continue;return{value:i.arg,done:u.done}}"throw"===i.type&&(l=d,u.method="throw",u.arg=i.arg)}})}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="executing",d="completed",y={};function v(){}function m(){}function g(){}var b={};l(b,a,function(){return this});var _=Object.getPrototypeOf,w=_&&_(_(j([])));w&&w!==r&&o.call(w,a)&&(b=w);var S=g.prototype=v.prototype=Object.create(b);function U(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function x(t,e){var r;n(this,"_invoke",{value:function(n,i){function a(){return new e(function(r,a){!function r(n,i,a,s){var u=f(t[n],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==tw(c)&&o.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}(n,i,r,a)})}return r=r?r.then(a,a):a()}})}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(o.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw TypeError(tw(e)+" is not iterable")}return m.prototype=g,n(S,"constructor",{value:g,configurable:!0}),n(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},U(x.prototype),l(x.prototype,s,function(){return this}),e.AsyncIterator=x,e.async=function(t,r,o,n,i){void 0===i&&(i=Promise);var a=new x(c(t,r,o,n),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},U(S),l(S,u,"Generator"),l(S,a,function(){return this}),l(S,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var o in e)r.push(o);return r.reverse(),function t(){for(;r.length;){var o=r.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(o,n){return s.type="throw",s.arg=e,r.next=o,n&&(r.method="next",r.arg=t),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var n=o.arg;O(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,o){return this.delegate={iterator:j(e),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function tU(t,e,r,o,n,i,a){try{var s=t[i](a),u=s.value}catch(t){r(t);return}s.done?e(u):Promise.resolve(u).then(o,n)}var tx=(y=function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")},v=[{key:"openFile",value:(h=tS().mark(function t(e,r){var o;return tS().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(ty()&&e&&void 0!==e.uri)){t.next=11;break}return t.prev=1,t.next=4,function(t){return new Promise(function(e,r){var o=new XMLHttpRequest;o.responseType="blob",o.onload=function(){e(o.response)},o.onerror=function(t){r(t)},o.open("GET",t),o.send()})}(e.uri);case 4:return o=t.sent,t.abrupt("return",new tm(o));case 8:throw t.prev=8,t.t0=t.catch(1),Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(t.t0));case 11:if("function"!=typeof e.slice||void 0===e.size){t.next=13;break}return t.abrupt("return",Promise.resolve(new tm(e)));case 13:if("function"!=typeof e.read){t.next=18;break}if(Number.isFinite(r=Number(r))){t.next=17;break}return t.abrupt("return",Promise.reject(Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return t.abrupt("return",Promise.resolve(new t_(e,r)));case 18:return t.abrupt("return",Promise.reject(Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return t.stop()}},t,null,[[1,8]])}),d=function(){var t=this,e=arguments;return new Promise(function(r,o){var n=h.apply(t,e);function i(t){tU(n,r,o,i,a,"next",t)}function a(t){tU(n,r,o,i,a,"throw",t)}i(void 0)})},function(t,e){return d.apply(this,arguments)})}],function(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!=tw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=tw(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tw(e)?e:e+""}(o.key),o)}}(y.prototype,v),Object.defineProperty(y,"prototype",{writable:!1}),y);function tE(t){return(tE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tO(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function tP(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!=tE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=tE(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tE(e)?e:e+""}(o.key),o)}}function tj(t,e,r){return e&&tP(t.prototype,e),r&&tP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var tk=tj(function t(){tO(this,t)},[{key:"createRequest",value:function(t,e){return new tR(t,e)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),tR=tj(function t(e,r){tO(this,t),this._xhr=new XMLHttpRequest,this._xhr.open(e,r,!0),this._method=e,this._url=r,this._headers={}},[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(t,e){this._xhr.setRequestHeader(t,e),this._headers[t]=e}},{key:"getHeader",value:function(t){return this._headers[t]}},{key:"setProgressHandler",value:function(t){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(e){e.lengthComputable&&t(e.loaded)})}},{key:"send",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise(function(r,o){t._xhr.onload=function(){r(new tL(t._xhr))},t._xhr.onerror=function(t){o(t)},t._xhr.send(e)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),tL=tj(function t(e){tO(this,t),this._xhr=e},[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(t){return this._xhr.getResponseHeader(t)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]);function tC(t){return(tC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var tA=!1;try{tA="localStorage"in window;var tT="tusSupport",tD=localStorage.getItem(tT);localStorage.setItem(tT,tD),null===tD&&localStorage.removeItem(tT)}catch(t){if(t.code===t.SECURITY_ERR||t.code===t.QUOTA_EXCEEDED_ERR)tA=!1;else throw t}var tz=tA,tH=(m=function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")},g=[{key:"findAllUploads",value:function(){return Promise.resolve(this._findEntries("tus::"))}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve(this._findEntries("tus::".concat(t,"::")))}},{key:"removeUpload",value:function(t){return localStorage.removeItem(t),Promise.resolve()}},{key:"addUpload",value:function(t,e){var r=Math.round(1e12*Math.random()),o="tus::".concat(t,"::").concat(r);return localStorage.setItem(o,JSON.stringify(e)),Promise.resolve(o)}},{key:"_findEntries",value:function(t){for(var e=[],r=0;r<localStorage.length;r++){var o=localStorage.key(r);if(0===o.indexOf(t))try{var n=JSON.parse(localStorage.getItem(o));n.urlStorageKey=o,e.push(n)}catch(t){}}return e}}],function(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!=tC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=tC(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tC(e)?e:e+""}(o.key),o)}}(m.prototype,g),Object.defineProperty(m,"prototype",{writable:!1}),m);function tN(t){return(tN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(tF=function(){return!!t})()}function tI(t){return(tI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tq(t,e){return(tq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)}return r}function tG(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tB(Object(r),!0).forEach(function(e){var o,n,i;o=t,n=e,i=r[e],(n=tM(n))in o?Object.defineProperty(o,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tB(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function tM(t){var e=function(t,e){if("object"!=tN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=tN(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tN(e)?e:e+""}var tK=tG(tG({},ta.defaultOptions),{},{httpStack:new tk,fileReader:new tx,urlStorage:tz?new tH:new x,fingerprint:function(t,e){var r,o,n;return ty()?Promise.resolve((r=t,o=e,n=r.exif?function(t){var e=0;if(0===t.length)return e;for(var r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e&=e;return e}(JSON.stringify(r.exif)):"noexif",["tus-rn",r.name||"noname",r.size||"nosize",n,o.endpoint].join("/"))):Promise.resolve(["tus-br",t.name,t.type,t.size,t.lastModified,e.endpoint].join("-"))}}),tX=function(t){var e;function r(){var t,e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return n=tG(tG({},tK),n),t=r,e=[o,n],t=tI(t),function(t,e){if(e&&("object"===tN(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var r=t;if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(this,tF()?Reflect.construct(t,e||[],tI(this).constructor):t.apply(this,e))}if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");return r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&tq(r,t),e=[{key:"terminate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=tG(tG({},tK),e),ta.terminate(t,e)}}],function(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,tM(o.key),o)}}(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}(ta),tZ="function"==typeof XMLHttpRequest&&"function"==typeof Blob&&"function"==typeof Blob.prototype.slice;t.s(["Upload",()=>tX,"defaultOptions",()=>tK,"isSupported",()=>tZ],22427),t.i(22427),t.s(["DefaultHttpStack",()=>tk,"DetailedError",0,b,"Upload",()=>tX,"canStoreURLs",()=>tz,"defaultOptions",()=>tK,"enableDebugLog",()=>w,"isSupported",()=>tZ],10545)}]);