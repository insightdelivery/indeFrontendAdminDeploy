"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[243],{2381:function(e,o,t){t.d(o,{z:function(){return l}});var r=t(7437),n=t(2265),s=t(7495),a=t(535),i=t(3448);let c=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,o)=>{let{className:t,variant:n,size:a,asChild:l=!1,...u}=e,d=l?s.g7:"button";return(0,r.jsx)(d,{className:(0,i.cn)(c({variant:n,size:a,className:t})),ref:o,...u})});l.displayName="Button"},3340:function(e,o,t){t.d(o,{pm:function(){return d}});var r=t(2265);let n=0,s=new Map,a=(e,o)=>{switch(o.type){case"ADD_TOAST":return{...e,toasts:[o.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===o.toast.id?{...e,...o.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=o;return t?setTimeout(()=>{l({type:"REMOVE_TOAST",toastId:t})},200):e.toasts.forEach(e=>{setTimeout(()=>{l({type:"REMOVE_TOAST",toastId:e.id})},200)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===o.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==o.toastId)}}},i=[],c={toasts:[]};function l(e){c=a(c,e),i.forEach(e=>{e(c)})}function u(e){let{duration:o,...t}=e,r=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=null!=o?o:3e3;console.log("[Toast] Creating toast with duration:",a,"ms","props:",{title:t.title,variant:t.variant}),l({type:"ADD_TOAST",toast:{...t,id:r,open:!0,duration:a,onOpenChange:e=>{e||(console.log("[Toast] onOpenChange(false) called for toast:",r),l({type:"DISMISS_TOAST",toastId:r}))}}}),s.has(r)&&clearTimeout(s.get(r));let i=setTimeout(()=>{console.log("[Toast] Auto-dismissing toast after",a,"ms:",r),s.has(r)&&s.delete(r),l({type:"DISMISS_TOAST",toastId:r})},a);return s.set(r,i),console.log("[Toast] Timer set for toast:",r,"duration:",a,"ms","variant:",t.variant),{id:r,dismiss:()=>{s.has(r)&&(clearTimeout(s.get(r)),s.delete(r)),l({type:"DISMISS_TOAST",toastId:r})},update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function d(){let[e,o]=r.useState(c);return r.useEffect(()=>(i.push(o),()=>{let e=i.indexOf(o);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},4453:function(e,o,t){var r=t(3464),n=t(4131);let s=r.Z.create({baseURL:"http://localhost:8000",headers:{"Content-Type":"application/json"},withCredentials:!1}),a=!1,i=[],c=0,l=async()=>{try{console.log("[Token Refresh] 토큰 갱신 시도 (".concat(c+1,"/").concat(3,")"));let e=(await r.Z.post("".concat("http://localhost:8000","/adminMember/tokenrefresh"),{},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.Z.get("accessToken"))}})).data.IndeAPIResponse;if(!e||"00"!==e.ErrorCode)throw Error((null==e?void 0:e.Message)||"토큰 갱신에 실패했습니다.");if(!e.Result)throw Error("토큰 갱신 응답 데이터가 없습니다.");let o=e.Result.access_token,t=e.Result.refresh_token;return n.Z.set("accessToken",o,{expires:1,secure:!0,sameSite:"strict",path:"/"}),n.Z.set("refreshToken",t,{expires:7,secure:!0,sameSite:"strict",path:"/"}),e.Result.user&&n.Z.set("userInfo",JSON.stringify(e.Result.user),{expires:1,secure:!0,sameSite:"strict",path:"/"}),c=0,console.log("[Token Refresh] 토큰 갱신 성공"),o}catch(e){if(c++,console.error("[Token Refresh] 토큰 갱신 실패 (".concat(c,"/").concat(3,"):"),e),c>=3)throw console.error("[Token Refresh] 최대 재시도 횟수 초과. 로그인 페이지로 이동합니다."),c=0,n.Z.remove("accessToken"),n.Z.remove("refreshToken"),n.Z.remove("userInfo"),window.location.pathname.includes("/login")||(window.location.href="/login"),Error("토큰 갱신에 실패했습니다. 다시 로그인해주세요.");throw e}};s.interceptors.request.use(e=>{let o=n.Z.get("accessToken");return o&&e.headers&&(e.headers.Authorization="Bearer ".concat(o)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>(c=0,e),async e=>{var o,t,r,u,d,f,h,p,g,v;console.log("[Token Refresh Interceptor] Response Interceptor 호출됨"),console.log("[Token Refresh Interceptor] 에러 상태:",null===(o=e.response)||void 0===o?void 0:o.status),console.log("[Token Refresh Interceptor] 에러 URL:",null===(t=e.config)||void 0===t?void 0:t.url),console.log("[Token Refresh Interceptor] 에러 전체:",e);let T=e.config;if(console.log("[Token Refresh Interceptor] originalRequest 존재:",!!T),console.log("[Token Refresh Interceptor] originalRequest._retry:",null==T?void 0:T._retry),((null===(r=e.response)||void 0===r?void 0:r.status)===401||(null===(u=e.response)||void 0===u?void 0:u.status)===403)&&T&&!T._retry){if(console.log("[Token Refresh Interceptor] ✅ ".concat(null===(p=e.response)||void 0===p?void 0:p.status," 에러 감지 - URL: ").concat(T.url)),null===(g=T.url)||void 0===g?void 0:g.includes("/adminMember/login"))return console.log("[Token Refresh Interceptor] 로그인 API는 토큰 갱신 시도하지 않음"),Promise.reject(e);if(null===(v=T.url)||void 0===v?void 0:v.includes("/adminMember/tokenrefresh"))return c++,console.log("[Token Refresh Interceptor] 토큰 갱신 API 실패 (".concat(c,"/").concat(3,")")),c>=3&&(console.error("[Token Refresh Interceptor] 최대 재시도 횟수 초과. 로그인 페이지로 이동합니다."),c=0,n.Z.remove("accessToken"),n.Z.remove("refreshToken"),n.Z.remove("userInfo"),window.location.pathname.includes("/login")||(window.location.href="/login")),Promise.reject(e);if(a)return console.log("[Token Refresh Interceptor] 이미 토큰 갱신 중, 요청 대기열에 추가"),new Promise((e,o)=>{i.push({resolve:e,reject:o})}).then(e=>(T.headers&&(T.headers.Authorization="Bearer ".concat(e)),s(T))).catch(e=>Promise.reject(e));T._retry=!0,a=!0,console.log("[Token Refresh Interceptor] 토큰 갱신 시작 - 원래 요청 URL: ".concat(T.url));try{let e=await l();return console.log("[Token Refresh Interceptor] 토큰 갱신 완료, 원래 요청 재시도"),i.forEach(o=>{let{resolve:t}=o;t(e)}),i=[],T.headers&&(T.headers.Authorization="Bearer ".concat(e)),a=!1,s(T)}catch(e){return console.error("[Token Refresh Interceptor] 토큰 갱신 실패:",e),i.forEach(o=>{let{reject:t}=o;t(e)}),i=[],a=!1,c>=3&&(console.error("[Token Refresh Interceptor] 최대 재시도 횟수 초과 확인. 로그인 페이지로 이동합니다."),c=0,n.Z.remove("accessToken"),n.Z.remove("refreshToken"),n.Z.remove("userInfo"),window.location.pathname.includes("/login")||(window.location.href="/login")),Promise.reject(e)}}return console.log("[Token Refresh Interceptor] ".concat(null===(d=e.response)||void 0===d?void 0:d.status,"이 아니거나 조건 불일치 - 에러 그대로 반환")),console.log("[Token Refresh Interceptor] 조건 체크:",{"status === 401 또는 403":(null===(f=e.response)||void 0===f?void 0:f.status)===401||(null===(h=e.response)||void 0===h?void 0:h.status)===403,"originalRequest 존재":!!T,"_retry 플래그":null==T?void 0:T._retry}),Promise.reject(e)}),o.Z=s},3448:function(e,o,t){t.d(o,{cn:function(){return s}});var r=t(1994),n=t(3335);function s(){for(var e=arguments.length,o=Array(e),t=0;t<e;t++)o[t]=arguments[t];return(0,n.m6)((0,r.W)(o))}},9636:function(e,o,t){t.d(o,{$8:function(){return l},Fm:function(){return i},bG:function(){return c},kS:function(){return a},x4:function(){return s}});var r=t(4453),n=t(4131);let s=async e=>{console.log("API 호출 시작:","/adminMember/login",e);try{let o=await r.Z.post("/adminMember/login",e);console.log("API 응답 원본:",o.data);let t=o.data.IndeAPIResponse;if(!t)throw console.error("IndeAPIResponse가 없습니다. 응답:",o.data),Error("응답 형식이 올바르지 않습니다.");if(console.log("파싱된 응답:",t),"00"!==t.ErrorCode)throw Error(t.Message||"로그인에 실패했습니다.");if(!t.Result)throw Error("응답 데이터가 없습니다.");return console.log("로그인 성공, Result:",t.Result),t.Result}catch(e){var o;throw console.error("로그인 API 오류:",e),console.error("오류 응답:",null===(o=e.response)||void 0===o?void 0:o.data),e}},a=async()=>{try{let e=(await r.Z.post("/adminMember/logout")).data.IndeAPIResponse;if("00"!==e.ErrorCode)throw Error(e.Message||"로그아웃에 실패했습니다.");return n.Z.remove("accessToken"),n.Z.remove("refreshToken"),n.Z.remove("userInfo"),e.Result}catch(r){var e,o,t;if(n.Z.remove("accessToken"),n.Z.remove("refreshToken"),n.Z.remove("userInfo"),null===(t=r.response)||void 0===t?void 0:null===(o=t.data)||void 0===o?void 0:null===(e=o.IndeAPIResponse)||void 0===e?void 0:e.Message)throw Error(r.response.data.IndeAPIResponse.Message);if(r.message)throw r;throw Error("로그아웃 중 오류가 발생했습니다.")}},i=(e,o,t)=>{let r={expires:1,secure:!0,sameSite:"strict",path:"/"};n.Z.set("accessToken",e,r),n.Z.set("refreshToken",o,{...r,expires:7}),t&&n.Z.set("userInfo",JSON.stringify(t),r)},c=()=>{let e=n.Z.get("userInfo");if(e)try{return JSON.parse(e)}catch(e){}return null},l=()=>!!n.Z.get("accessToken")}}]);