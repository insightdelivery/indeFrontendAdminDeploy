(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[267],{3229:function(e,s,t){Promise.resolve().then(t.bind(t,761))},761:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return U}});var r=t(7437),a=t(2265),o=t(4453);let n=async()=>{console.log("관리자 목록 조회 API 호출 시작:","/adminMember/list");try{let e=await o.Z.get("/adminMember/list");console.log("관리자 목록 조회 API 응답 원본:",e.data);let s=e.data.IndeAPIResponse;if(!s)throw console.error("IndeAPIResponse가 없습니다. 응답:",e.data),Error("응답 형식이 올바르지 않습니다.");if(console.log("파싱된 응답:",s),"00"!==s.ErrorCode)throw Error(s.Message||"관리자 목록 조회에 실패했습니다.");if(!s.Result)throw Error("응답 데이터가 없습니다.");return console.log("관리자 목록 조회 성공, Result:",s.Result),s.Result.admins||[]}catch(i){var e,s,t,r,a,n;console.error("관리자 목록 조회 오류:",i),console.error("오류 응답:",null===(e=i.response)||void 0===e?void 0:e.data);let o="관리자 목록 조회에 실패했습니다.";throw(null===(r=i.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:null===(s=t.IndeAPIResponse)||void 0===s?void 0:s.Message)?o=i.response.data.IndeAPIResponse.Message:(null===(n=i.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.error)?o=i.response.data.error:i.message&&(o=i.message),Error(o)}},i=async e=>{console.log("관리자 등록 API 호출 시작:","/adminMember/join",e);try{let s=await o.Z.post("/adminMember/join",e);console.log("관리자 등록 API 응답 원본:",s.data);let t=s.data.IndeAPIResponse;if(!t)throw console.error("IndeAPIResponse가 없습니다. 응답:",s.data),Error("응답 형식이 올바르지 않습니다.");if(console.log("파싱된 응답:",t),"00"!==t.ErrorCode)throw Error(t.Message||"관리자 등록에 실패했습니다.");if(!t.Result)throw Error("응답 데이터가 없습니다.");if(console.log("관리자 등록 성공, Result:",t.Result),!t.Result.user)throw Error("사용자 정보가 없습니다.");return t.Result.user}catch(o){var s,t,r,a,n,i;console.error("관리자 등록 오류:",o),console.error("오류 응답:",null===(s=o.response)||void 0===s?void 0:s.data);let e="관리자 등록에 실패했습니다.";throw(null===(a=o.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:null===(t=r.IndeAPIResponse)||void 0===t?void 0:t.Message)?e=o.response.data.IndeAPIResponse.Message:(null===(i=o.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.error)?e=o.response.data.error:o.message&&(e=o.message),Error(e)}},l=async e=>{console.log("관리자 수정 API 호출 시작:","/adminMember/update",e);try{let s=await o.Z.put("/adminMember/update",e);console.log("관리자 수정 API 응답 원본:",s.data);let t=s.data.IndeAPIResponse;if(!t)throw console.error("IndeAPIResponse가 없습니다. 응답:",s.data),Error("응답 형식이 올바르지 않습니다.");if(console.log("파싱된 응답:",t),"00"!==t.ErrorCode)throw Error(t.Message||"관리자 수정에 실패했습니다.");if(!t.Result)throw Error("응답 데이터가 없습니다.");if(console.log("관리자 수정 성공, Result:",t.Result),!t.Result.user)throw Error("사용자 정보가 없습니다.");return t.Result.user}catch(o){var s,t,r,a,n,i;console.error("관리자 수정 오류:",o),console.error("오류 응답:",null===(s=o.response)||void 0===s?void 0:s.data);let e="관리자 수정에 실패했습니다.";throw(null===(a=o.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:null===(t=r.IndeAPIResponse)||void 0===t?void 0:t.Message)?e=o.response.data.IndeAPIResponse.Message:(null===(i=o.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.error)?e=o.response.data.error:o.message&&(e=o.message),Error(e)}},d=async e=>{console.log("관리자 삭제 API 호출 시작:","/adminMember/delete",e);try{let s=await o.Z.delete("/adminMember/delete",{data:{memberShipSid:e}});console.log("관리자 삭제 API 응답 원본:",s.data);let t=s.data.IndeAPIResponse;if(!t)throw console.error("IndeAPIResponse가 없습니다. 응답:",s.data),Error("응답 형식이 올바르지 않습니다.");if(console.log("파싱된 응답:",t),"00"!==t.ErrorCode)throw Error(t.Message||"관리자 삭제에 실패했습니다.");console.log("관리자 삭제 성공, Result:",t.Result)}catch(o){var s,t,r,a,n,i;console.error("관리자 삭제 오류:",o),console.error("오류 응답:",null===(s=o.response)||void 0===s?void 0:s.data);let e="관리자 삭제에 실패했습니다.";throw(null===(a=o.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:null===(t=r.IndeAPIResponse)||void 0===t?void 0:t.Message)?e=o.response.data.IndeAPIResponse.Message:(null===(i=o.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.error)?e=o.response.data.error:o.message&&(e=o.message),Error(e)}};var c=t(3340),m=t(2381),p=t(9501),h=t(3590),x=t(7119),u=t(3519),f=t(2489),g=t(3448);let v=u.fC;u.xz;let b=u.h_;u.x8;let y=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(u.aV,{ref:s,className:(0,g.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a})});y.displayName=u.aV.displayName;let j=a.forwardRef((e,s)=>{let{className:t,children:a,...o}=e;return(0,r.jsxs)(b,{children:[(0,r.jsx)(y,{}),(0,r.jsxs)(u.VY,{ref:s,className:(0,g.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[a,(0,r.jsxs)(u.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});j.displayName=u.VY.displayName;let w=e=>{let{className:s,...t}=e;return(0,r.jsx)("div",{className:(0,g.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};w.displayName="DialogHeader";let N=e=>{let{className:s,...t}=e;return(0,r.jsx)("div",{className:(0,g.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};N.displayName="DialogFooter";let S=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(u.Dx,{ref:s,className:(0,g.cn)("text-lg font-semibold leading-none tracking-tight",t),...a})});S.displayName=u.Dx.displayName;let I=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(u.dk,{ref:s,className:(0,g.cn)("text-sm text-muted-foreground",t),...a})});I.displayName=u.dk.displayName;var _=t(279),R=t(5060);let k=x.Ry({memberShipId:x.Z_().min(1,"회원 ID를 입력해주세요").max(50,"회원 ID는 50자 이하여야 합니다"),password:x.Z_().min(8,"비밀번호는 최소 8자 이상이어야 합니다").optional().or(x.i0("")),password_confirm:x.Z_().optional().or(x.i0("")),memberShipName:x.Z_().min(1,"이름을 입력해주세요").max(100,"이름은 100자 이하여야 합니다"),memberShipEmail:x.Z_().email("올바른 이메일 주소를 입력해주세요"),memberShipPhone:x.Z_().optional().or(x.i0("")),memberShipLevel:x.Rx().min(1).max(10).default(1),is_admin:x.O7().default(!1),is_active:x.O7().optional()}).refine(e=>!e.password&&!e.password_confirm||e.password===e.password_confirm,{message:"비밀번호가 일치하지 않습니다",path:["password_confirm"]});function T(e){let{open:s,onOpenChange:t,onSubmit:o,admin:n,mode:i}=e,{register:l,handleSubmit:d,formState:{errors:c,isSubmitting:x},reset:u,watch:f}=(0,p.cI)({resolver:(0,h.F)(k),defaultValues:{memberShipId:"",password:"",password_confirm:"",memberShipName:"",memberShipEmail:"",memberShipPhone:"",memberShipLevel:1,is_admin:!1,is_active:!0}});(0,a.useEffect)(()=>{s&&("edit"===i&&n?u({memberShipId:n.memberShipId,password:"",password_confirm:"",memberShipName:n.memberShipName,memberShipEmail:n.memberShipEmail,memberShipPhone:n.memberShipPhone||"",memberShipLevel:n.memberShipLevel,is_admin:n.is_admin,is_active:n.is_active}):u({memberShipId:"",password:"",password_confirm:"",memberShipName:"",memberShipEmail:"",memberShipPhone:"",memberShipLevel:1,is_admin:!1,is_active:!0}))},[s,n,i,u]);let g="edit"===i,b=f("password"),y=async e=>{if(g&&!e.password){let{password:s,password_confirm:t,...r}=e;await o(r)}else await o(e)};return(0,r.jsx)(v,{open:s,onOpenChange:t,children:(0,r.jsxs)(j,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)(w,{children:[(0,r.jsx)(S,{children:g?"관리자 수정":"관리자 등록"}),(0,r.jsx)(I,{children:g?"관리자 정보를 수정합니다. 비밀번호는 변경할 경우에만 입력하세요.":"새로운 관리자를 등록합니다."})]}),(0,r.jsxs)("form",{onSubmit:d(y),className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(R._,{htmlFor:"memberShipId",children:["회원 ID ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(_.I,{id:"memberShipId",...l("memberShipId"),disabled:g,placeholder:"회원 ID를 입력하세요"}),c.memberShipId&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:c.memberShipId.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(R._,{htmlFor:"password",children:["비밀번호 ",!g&&(0,r.jsx)("span",{className:"text-red-500",children:"*"}),g&&(0,r.jsx)("span",{className:"text-gray-500 text-xs",children:"(변경 시에만 입력)"})]}),(0,r.jsx)(_.I,{id:"password",type:"password",...l("password"),placeholder:g?"변경할 비밀번호를 입력하세요":"비밀번호를 입력하세요 (최소 8자)"}),c.password&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:c.password.message})]}),(!g||b)&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(R._,{htmlFor:"password_confirm",children:["비밀번호 확인 ",!g&&(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(_.I,{id:"password_confirm",type:"password",...l("password_confirm"),placeholder:"비밀번호를 다시 입력하세요"}),c.password_confirm&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:c.password_confirm.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(R._,{htmlFor:"memberShipName",children:["이름 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(_.I,{id:"memberShipName",...l("memberShipName"),placeholder:"이름을 입력하세요"}),c.memberShipName&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:c.memberShipName.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(R._,{htmlFor:"memberShipEmail",children:["이메일 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(_.I,{id:"memberShipEmail",type:"email",...l("memberShipEmail"),placeholder:"이메일을 입력하세요"}),c.memberShipEmail&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:c.memberShipEmail.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(R._,{htmlFor:"memberShipPhone",children:"전화번호"}),(0,r.jsx)(_.I,{id:"memberShipPhone",...l("memberShipPhone"),placeholder:"전화번호를 입력하세요 (선택)"}),c.memberShipPhone&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:c.memberShipPhone.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(R._,{htmlFor:"memberShipLevel",children:"회원 레벨"}),(0,r.jsx)(_.I,{id:"memberShipLevel",type:"number",min:"1",max:"10",...l("memberShipLevel",{valueAsNumber:!0}),placeholder:"1-10 사이의 레벨을 입력하세요"}),c.memberShipLevel&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:c.memberShipLevel.message})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"is_admin",...l("is_admin"),className:"h-4 w-4 rounded border-gray-300 text-neon-yellow focus:ring-neon-yellow"}),(0,r.jsx)(R._,{htmlFor:"is_admin",className:"cursor-pointer",children:"관리자 권한 부여"})]}),g&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"is_active",...l("is_active"),className:"h-4 w-4 rounded border-gray-300 text-neon-yellow focus:ring-neon-yellow"}),(0,r.jsx)(R._,{htmlFor:"is_active",className:"cursor-pointer",children:"활성화 (비활성화된 관리자를 다시 활성화할 수 있습니다)"})]})]}),(0,r.jsxs)(N,{children:[(0,r.jsx)(m.z,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:x,children:"취소"}),(0,r.jsx)(m.z,{type:"submit",className:"bg-neon-yellow text-black hover:bg-opacity-90",disabled:x,children:x?"처리 중...":g?"수정":"등록"})]})]})]})})}var E=t(3639);function P(e){let{open:s,onOpenChange:t,admin:a,onConfirm:o}=e,n=async()=>{try{await o(),t(!1)}catch(e){throw e}};return a?(0,r.jsx)(v,{open:s,onOpenChange:t,children:(0,r.jsxs)(j,{className:"sm:max-w-[500px]",children:[(0,r.jsx)(w,{children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-red-100",children:(0,r.jsx)(E.Z,{className:"h-6 w-6 text-red-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(S,{className:"text-xl",children:"관리자 삭제 확인"}),(0,r.jsx)(I,{className:"mt-1",children:"이 작업은 되돌릴 수 없습니다."})]})]})}),(0,r.jsxs)("div",{className:"py-4",children:[(0,r.jsxs)("div",{className:"rounded-lg bg-red-50 border border-red-200 p-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-red-900 mb-2",children:"다음 관리자를 삭제(비활성화)하시겠습니까?"}),(0,r.jsxs)("div",{className:"bg-white rounded-md p-3 mt-2 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"관리자 ID:"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a.memberShipId})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"이름:"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a.memberShipName})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"이메일:"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a.memberShipEmail})]})]})]}),(0,r.jsx)("div",{className:"mt-4 rounded-lg bg-yellow-50 border border-yellow-200 p-3",children:(0,r.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,r.jsx)("strong",{children:"참고:"})," 관리자는 완전히 삭제되지 않고 ",(0,r.jsx)("strong",{children:"비활성화"}),"됩니다. 비활성화된 관리자는 로그인할 수 없으며, 필요시 나중에 다시 활성화할 수 있습니다."]})})]}),(0,r.jsxs)(N,{children:[(0,r.jsx)(m.z,{type:"button",variant:"outline",onClick:()=>t(!1),children:"취소"}),(0,r.jsx)(m.z,{type:"button",className:"bg-red-600 text-white hover:bg-red-700",onClick:n,children:"삭제 (비활성화)"})]})]})}):null}var A=t(9397),Z=t(3247),M=t(9345),C=t(3041),O=t(8906),L=t(9663),D=t(3745),z=t(1047),F=t(5868),V=t(8930);function U(){let{toast:e}=(0,c.pm)(),[s,t]=(0,a.useState)([]),[o,p]=(0,a.useState)(!0),[h,x]=(0,a.useState)(""),[u,f]=(0,a.useState)(!1),[g,v]=(0,a.useState)(!1),[b,y]=(0,a.useState)(null),[j,w]=(0,a.useState)("create"),[N,S]=(0,a.useState)(!1),[I,_]=(0,a.useState)(null),R=(0,a.useCallback)(async()=>{try{p(!0);let e=await n();t(e)}catch(s){e({title:"오류",description:s.message||"관리자 목록을 불러오는데 실패했습니다.",variant:"destructive",duration:3e3})}finally{p(!1)}},[e]);(0,a.useEffect)(()=>{R()},[R]);let k=s.filter(e=>{if(!u&&!e.is_active)return!1;let s=h.toLowerCase();return e.memberShipId.toLowerCase().includes(s)||e.memberShipName.toLowerCase().includes(s)||e.memberShipEmail.toLowerCase().includes(s)||e.memberShipPhone&&e.memberShipPhone.includes(s)}),E=e=>e>=9?"bg-red-100 text-red-800":e>=7?"bg-orange-100 text-orange-800":e>=5?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",U=e=>e?new Date(e).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",B=e=>{y(e),w("edit"),v(!0)},q=e=>{_(e),S(!0)},Y=async()=>{if(I)try{await d(I.memberShipSid),e({title:"삭제 완료",description:'관리자 "'.concat(I.memberShipName,'" (').concat(I.memberShipId,")가 성공적으로 비활성화되었습니다."),duration:3e3}),await R()}catch(s){throw e({title:"삭제 실패",description:s.message||"관리자 삭제에 실패했습니다.",variant:"destructive",duration:3e3}),s}},G=async s=>{try{if("create"===j){if(!s.password||!s.password_confirm){e({title:"오류",description:"비밀번호를 입력해주세요.",variant:"destructive",duration:3e3});return}await i({memberShipId:s.memberShipId,password:s.password,password_confirm:s.password_confirm,memberShipName:s.memberShipName,memberShipEmail:s.memberShipEmail,memberShipPhone:s.memberShipPhone||"",memberShipLevel:s.memberShipLevel||1,is_admin:s.is_admin||!1}),e({title:"등록 완료",description:"관리자가 성공적으로 등록되었습니다.",duration:3e3})}else{if(!b){e({title:"오류",description:"수정할 관리자 정보가 없습니다.",variant:"destructive",duration:3e3});return}await l({memberShipSid:b.memberShipSid,memberShipName:s.memberShipName,memberShipEmail:s.memberShipEmail,memberShipPhone:s.memberShipPhone||"",memberShipLevel:s.memberShipLevel||1,is_admin:s.is_admin||!1,is_active:void 0!==s.is_active?s.is_active:b.is_active,...s.password&&{password:s.password,password_confirm:s.password_confirm}}),e({title:"수정 완료",description:"관리자 정보가 성공적으로 수정되었습니다.",duration:3e3})}v(!1),await R()}catch(s){e({title:"create"===j?"등록 실패":"수정 실패",description:s.message||"".concat("create"===j?"등록":"수정","에 실패했습니다."),variant:"destructive",duration:3e3})}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"관리자 등록"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"관리자 목록을 조회하고 관리할 수 있습니다."})]}),(0,r.jsxs)(m.z,{className:"bg-neon-yellow text-black hover:bg-opacity-90",onClick:()=>{y(null),w("create"),v(!0)},children:[(0,r.jsx)(A.Z,{className:"h-4 w-4 mr-2"}),"관리자 등록"]})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(Z.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"관리자 ID, 이름, 이메일로 검색...",value:h,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neon-yellow focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"showInactive",checked:u,onChange:e=>f(e.target.checked),className:"h-4 w-4 rounded border-gray-300 text-neon-yellow focus:ring-neon-yellow"}),(0,r.jsx)("label",{htmlFor:"showInactive",className:"text-sm text-gray-700 cursor-pointer",children:"비활성화된 관리자 표시"})]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[o?(0,r.jsxs)("div",{className:"p-12 text-center text-gray-500",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-neon-yellow mx-auto mb-4"}),"로딩 중..."]}):0===k.length?(0,r.jsx)("div",{className:"p-12 text-center text-gray-500",children:h?"검색 결과가 없습니다.":"등록된 관리자가 없습니다."}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"관리자 정보"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"연락처"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"권한"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"로그인 정보"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"등록일"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.memberShipName}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.memberShipId]}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["SID: ",e.memberShipSid]})]})})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-900 flex items-center gap-2",children:[(0,r.jsx)(M.Z,{className:"h-4 w-4 text-gray-400"}),e.memberShipEmail]}),e.memberShipPhone&&(0,r.jsxs)("div",{className:"text-sm text-gray-500 flex items-center gap-2 mt-1",children:[(0,r.jsx)(C.Z,{className:"h-4 w-4 text-gray-400"}),e.memberShipPhone]})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[e.is_admin?(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-neon-yellow text-black",children:[(0,r.jsx)(O.Z,{className:"h-3 w-3 mr-1"}),"관리자"]}):(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"일반"}),e.is_active?(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,r.jsx)(L.Z,{className:"h-3 w-3 mr-1"}),"활성"]}):(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,r.jsx)(D.Z,{className:"h-3 w-3 mr-1"}),"비활성"]})]}),(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(E(e.memberShipLevel)),children:["레벨 ",e.memberShipLevel]})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm text-gray-900",children:e.last_login?(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(z.Z,{className:"h-4 w-4 text-gray-400"}),U(e.last_login)]}):(0,r.jsx)("span",{className:"text-gray-400",children:"로그인 이력 없음"})}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["로그인 ",e.login_count,"회"]})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:U(e.created_at)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)(m.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>B(e),children:(0,r.jsx)(F.Z,{className:"h-4 w-4"})}),(0,r.jsx)(m.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>q(e),children:(0,r.jsx)(V.Z,{className:"h-4 w-4"})})]})})]},e.memberShipSid))})]})}),!o&&k.length>0&&(0,r.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,r.jsxs)("span",{children:["총 ",k.length,"명의 관리자",h&&" (검색 결과: ".concat(k.length,"명)")]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("span",{children:["활성: ",k.filter(e=>e.is_active).length,"명"]}),(0,r.jsxs)("span",{children:["관리자: ",k.filter(e=>e.is_admin).length,"명"]})]})]})})]}),(0,r.jsx)(T,{open:g,onOpenChange:v,onSubmit:G,admin:b,mode:j}),(0,r.jsx)(P,{open:N,onOpenChange:S,admin:I,onConfirm:Y})]})}},2381:function(e,s,t){"use strict";t.d(s,{z:function(){return d}});var r=t(7437),a=t(2265),o=t(7053),n=t(535),i=t(3448);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,s)=>{let{className:t,variant:a,size:n,asChild:d=!1,...c}=e,m=d?o.g7:"button";return(0,r.jsx)(m,{className:(0,i.cn)(l({variant:a,size:n,className:t})),ref:s,...c})});d.displayName="Button"},279:function(e,s,t){"use strict";t.d(s,{I:function(){return n}});var r=t(7437),a=t(2265),o=t(3448);let n=a.forwardRef((e,s)=>{let{className:t,type:a,...n}=e;return(0,r.jsx)("input",{type:a,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});n.displayName="Input"},5060:function(e,s,t){"use strict";t.d(s,{_:function(){return d}});var r=t(7437),a=t(2265),o=t(370),n=t(535),i=t(3448);let l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(o.f,{ref:s,className:(0,i.cn)(l(),t),...a})});d.displayName=o.f.displayName},3340:function(e,s,t){"use strict";t.d(s,{pm:function(){return m}});var r=t(2265);let a=0,o=new Map,n=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?setTimeout(()=>{d({type:"REMOVE_TOAST",toastId:t})},200):e.toasts.forEach(e=>{setTimeout(()=>{d({type:"REMOVE_TOAST",toastId:e.id})},200)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},i=[],l={toasts:[]};function d(e){l=n(l,e),i.forEach(e=>{e(l)})}function c(e){let{duration:s,...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),n=null!=s?s:3e3;console.log("[Toast] Creating toast with duration:",n,"ms","props:",{title:t.title,variant:t.variant}),d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,duration:n,onOpenChange:e=>{e||(console.log("[Toast] onOpenChange(false) called for toast:",r),d({type:"DISMISS_TOAST",toastId:r}))}}}),o.has(r)&&clearTimeout(o.get(r));let i=setTimeout(()=>{console.log("[Toast] Auto-dismissing toast after",n,"ms:",r),o.has(r)&&o.delete(r),d({type:"DISMISS_TOAST",toastId:r})},n);return o.set(r,i),console.log("[Toast] Timer set for toast:",r,"duration:",n,"ms","variant:",t.variant),{id:r,dismiss:()=>{o.has(r)&&(clearTimeout(o.get(r)),o.delete(r)),d({type:"DISMISS_TOAST",toastId:r})},update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,s]=r.useState(l);return r.useEffect(()=>(i.push(s),()=>{let e=i.indexOf(s);e>-1&&i.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},4453:function(e,s,t){"use strict";var r=t(3464),a=t(4131);let o=r.Z.create({baseURL:"https://admin-api.inde.kr",headers:{"Content-Type":"application/json"},withCredentials:!1}),n=!1,i=[],l=0,d=async()=>{try{console.log("[Token Refresh] 토큰 갱신 시도 (".concat(l+1,"/").concat(3,")"));let e=(await r.Z.post("".concat("https://admin-api.inde.kr","/adminMember/tokenrefresh"),{},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.Z.get("accessToken"))}})).data.IndeAPIResponse;if(!e||"00"!==e.ErrorCode)throw Error((null==e?void 0:e.Message)||"토큰 갱신에 실패했습니다.");if(!e.Result)throw Error("토큰 갱신 응답 데이터가 없습니다.");let s=e.Result.access_token,t=e.Result.refresh_token;return a.Z.set("accessToken",s,{expires:1,secure:!0,sameSite:"strict",path:"/"}),a.Z.set("refreshToken",t,{expires:7,secure:!0,sameSite:"strict",path:"/"}),e.Result.user&&a.Z.set("userInfo",JSON.stringify(e.Result.user),{expires:1,secure:!0,sameSite:"strict",path:"/"}),l=0,console.log("[Token Refresh] 토큰 갱신 성공"),s}catch(e){if(l++,console.error("[Token Refresh] 토큰 갱신 실패 (".concat(l,"/").concat(3,"):"),e),l>=3)throw console.error("[Token Refresh] 최대 재시도 횟수 초과. 로그인 페이지로 이동합니다."),l=0,a.Z.remove("accessToken"),a.Z.remove("refreshToken"),a.Z.remove("userInfo"),window.location.pathname.includes("/login")||(window.location.href="/login"),Error("토큰 갱신에 실패했습니다. 다시 로그인해주세요.");throw e}};o.interceptors.request.use(e=>{let s=a.Z.get("accessToken");return s&&e.headers&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>(l=0,e),async e=>{var s,t,r,c,m,p,h,x,u,f;console.log("[Token Refresh Interceptor] Response Interceptor 호출됨"),console.log("[Token Refresh Interceptor] 에러 상태:",null===(s=e.response)||void 0===s?void 0:s.status),console.log("[Token Refresh Interceptor] 에러 URL:",null===(t=e.config)||void 0===t?void 0:t.url),console.log("[Token Refresh Interceptor] 에러 전체:",e);let g=e.config;if(console.log("[Token Refresh Interceptor] originalRequest 존재:",!!g),console.log("[Token Refresh Interceptor] originalRequest._retry:",null==g?void 0:g._retry),((null===(r=e.response)||void 0===r?void 0:r.status)===401||(null===(c=e.response)||void 0===c?void 0:c.status)===403)&&g&&!g._retry){if(console.log("[Token Refresh Interceptor] ✅ ".concat(null===(x=e.response)||void 0===x?void 0:x.status," 에러 감지 - URL: ").concat(g.url)),null===(u=g.url)||void 0===u?void 0:u.includes("/adminMember/login"))return console.log("[Token Refresh Interceptor] 로그인 API는 토큰 갱신 시도하지 않음"),Promise.reject(e);if(null===(f=g.url)||void 0===f?void 0:f.includes("/adminMember/tokenrefresh"))return l++,console.log("[Token Refresh Interceptor] 토큰 갱신 API 실패 (".concat(l,"/").concat(3,")")),l>=3&&(console.error("[Token Refresh Interceptor] 최대 재시도 횟수 초과. 로그인 페이지로 이동합니다."),l=0,a.Z.remove("accessToken"),a.Z.remove("refreshToken"),a.Z.remove("userInfo"),window.location.pathname.includes("/login")||(window.location.href="/login")),Promise.reject(e);if(n)return console.log("[Token Refresh Interceptor] 이미 토큰 갱신 중, 요청 대기열에 추가"),new Promise((e,s)=>{i.push({resolve:e,reject:s})}).then(e=>(g.headers&&(g.headers.Authorization="Bearer ".concat(e)),o(g))).catch(e=>Promise.reject(e));g._retry=!0,n=!0,console.log("[Token Refresh Interceptor] 토큰 갱신 시작 - 원래 요청 URL: ".concat(g.url));try{let e=await d();return console.log("[Token Refresh Interceptor] 토큰 갱신 완료, 원래 요청 재시도"),i.forEach(s=>{let{resolve:t}=s;t(e)}),i=[],g.headers&&(g.headers.Authorization="Bearer ".concat(e)),n=!1,o(g)}catch(e){return console.error("[Token Refresh Interceptor] 토큰 갱신 실패:",e),i.forEach(s=>{let{reject:t}=s;t(e)}),i=[],n=!1,l>=3&&(console.error("[Token Refresh Interceptor] 최대 재시도 횟수 초과 확인. 로그인 페이지로 이동합니다."),l=0,a.Z.remove("accessToken"),a.Z.remove("refreshToken"),a.Z.remove("userInfo"),window.location.pathname.includes("/login")||(window.location.href="/login")),Promise.reject(e)}}return console.log("[Token Refresh Interceptor] ".concat(null===(m=e.response)||void 0===m?void 0:m.status,"이 아니거나 조건 불일치 - 에러 그대로 반환")),console.log("[Token Refresh Interceptor] 조건 체크:",{"status === 401 또는 403":(null===(p=e.response)||void 0===p?void 0:p.status)===401||(null===(h=e.response)||void 0===h?void 0:h.status)===403,"originalRequest 존재":!!g,"_retry 플래그":null==g?void 0:g._retry}),Promise.reject(e)}),s.Z=o},3448:function(e,s,t){"use strict";t.d(s,{cn:function(){return o}});var r=t(1994),a=t(3335);function o(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.m6)((0,r.W)(s))}}},function(e){e.O(0,[186,85,589,481,812,971,117,744],function(){return e(e.s=3229)}),_N_E=e.O()}]);